<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Insert Your Page Title Here</title>
  <meta name="description"
    content="This is the description that search engines will display. Aim for 145-155 characters.">
  <meta name="author" content="Insert the content author or owner name here">

  <script type="module">
    import { Octokit } from "https://cdn.skypack.dev/@octokit/rest";

    function mapToData(data) {
      return {
        name: data.name,
        full_name: data.full_name,
        owner: {
          login: data.owner.login,
          avatar_url: data.owner.avatar_url,
          html_url: data.owner.html_url
        },
        html_url: data.html_url,
        description: data.description,
        stargazers_count: data.stargazers_count,
        watchers_count: data.watchers_count,
        topics: data.topics
      };
    }

    let octokit = new Octokit({});
    let owner = "immarianaas";

    let repo = "c-quiz-language";

    let answer = octokit.request('GET /repos/' + owner + '/' + repo, {
      owner: owner,
      repo: repo
    });



    window.onload = function () {
      let githubData;
      answer.then(result => {
        console.log(result);
        githubData = mapToData(result.data);
        console.log(githubData);

        let data = result.data;


        document.getElementById('owner').textContent = githubData.owner.login;
        document.getElementById('repo').textContent = githubData.name;
        document.getElementById('description').textContent = githubData.description;
        document.getElementById('owneravatar').src = githubData.owner.avatar_url;

        let topicsLength = githubData.topics.length;

        for (let i = 0; i < topicsLength; i++) {
          let topic_code = '<span class="description topic" id="topic' + i + '"></span>';
          document.getElementById('topics').innerHTML += topic_code;
          document.getElementById('topic' + i).textContent = githubData.topics[i];
        }

        if (data.has_wiki) {
          let wiki_code = '<div class="" id="has_wiki"> README</div>';
          document.getElementById('additionalinfo').innerHTML += wiki_code;
        }

        if (data.license) {
          let licence_code = '<div class="" id="licence"></div>';
          document.getElementById('additionalinfo').innerHTML += licence_code;
          document.getElementById('licence').textContent = data.license.name;
        }

        document.getElementById('additionalinfo').innerHTML += '<div class=""><b>' + data.stargazers_count + '</b> stargazers</div>';
        document.getElementById('additionalinfo').innerHTML += '<div class=""><b>' + data.watchers_count + '</b> watchers</div>';
        document.getElementById('additionalinfo').innerHTML += '<div class=""><b>' + data.forks_count + '</b> forks</div>';

      });


      /*
      - readme      -> "has_wiki" ?
      - licence     -> "licence.name"
      - stars       -> "stargazers_count"
      - watching    -> "watchers_count"
      - forks       -> "forks_count"

      - languages   -> https://api.github.com/repos/immarianaas/c-quiz-language/languages

      - issues      -> "open_issues_count"
      - contributors  -> "collaborators_url" ... req. auth.
      */

    }

  </script>

  <!-- Link to your JS file -->
  <script src="scripts/script.js"></script>

  <!-- Link to your CSS file -->
  <link rel="stylesheet" href="css/style.css">

</head>

<body>

  <!--

  <div class="widget versionTwo">

    <div class="header">

      <div class="inline">
        <div class="icon">
          <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="40px">
            <title>GitHub</title>
            <path
              d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
          </svg>
        </div>
        <div class="usernamePart">
          <div class="icon">
            <img id="owneravatar" width="40px" style="border-radius: 10px;">
          </div>
          <div class="username">
            <span class="" id="owner"></span>
          </div>
        </div>
      </div>


      <div class="repnameTwo inline">
        <span id="repo"></span>
      </div>

    </div>
    <p class="description" id="description"></p>

    <span id="topics">
    </span>

  </div>
-->



  <div class="widget versionTwo">

    <div class="header">

      <div class="inline">
        <div class="icon">
          <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="40px">
            <title>GitHub</title>
            <path
              d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
          </svg>
        </div>
        <div class="usernamePart">
          <div class="icon">
            <img id="owneravatar" width="40px" style="border-radius: 10px;">
          </div>
          <div class="username">
            <span class="" id="owner"></span>
          </div>
        </div>
      </div>


      <div class="repnameTwo inline">
        <span id="repo"></span>
      </div>

    </div>
    <p class="description" id="description"></p>

    <span id="topics">
    </span>

    <div class="additional" id="additionalinfo">
    </div>

  </div>



</body>

</html>